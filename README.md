# Signal

インターネットなしで音や光を使ってメッセージを送受信する物理信号通信アプリケーション。

## 特徴

6つの通信チャネルをサポート:

| チャネル | 方式 | 特徴 |
|---------|------|------|
| 超音波 | 18-19kHz FSK | 人には聞こえない音で通信 |
| 可聴音 | 800-1600Hz FSK | 聞こえる音で通信 |
| 画面明滅 | 明暗切り替え | 画面の明るさ変化で通信 |
| 色変調 | 赤緑切り替え | 色の変化で通信 |
| グリッド | 4×4並列 | 16ビット同時送信で高速通信 |
| QRコード | バースト送信 | 大量データの一括送信 |

## クイックスタート

### 必要要件

- Node.js 18以上
- npm

### インストール

```bash
npm install
```

### 開発サーバー起動

```bash
npm run dev
```

http://localhost:3000 でアプリにアクセスできます。ファイル変更時に自動リロードされます。

### 本番ビルド

```bash
npm run build
```

`dist/index.html` に外部依存なしで動作する単一HTMLファイルが生成されます。

## 使い方

### メッセージ送信

1. 画面上部でチャネルを選択
2. 入力欄にメッセージを入力
3. 送信ボタンをクリック

### メッセージ受信

1. 画面上部でチャネルを選択（送信側と同じチャネル）
2. 受信ボタンをクリックして受信モード開始
3. 送信側からの信号を待機
4. メッセージ受信後、チャット領域に表示

**注意**: 視覚系チャネル（画面明滅、色変調、グリッド、QR）はカメラへのアクセス許可が必要です。

## 開発

### テスト実行

```bash
npm test           # 一度実行
npm run test:watch # ウォッチモード
```

### ディレクトリ構造

```
src/
├── main.ts              # エントリーポイント
├── application/         # アプリケーション層（状態管理、メッセージサービス）
├── domain/              # ドメイン層（プロトコル、ビット受信）
├── channels/            # チャネル実装（6種類）
├── infrastructure/      # インフラ層（Audio/Video/Canvas API）
├── ui/                  # UI層（レンダラー、コンポーネント）
├── types/               # 型定義
├── constants/           # 定数
└── lib/                 # 外部ライブラリラッパー

tests/                   # テストファイル
scripts/                 # ビルド・開発スクリプト
```

### ドキュメント

- [要件書](requirements.md)
- [設計書](design.md)

## ライセンス

MIT
